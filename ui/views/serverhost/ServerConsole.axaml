<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:controls="clr-namespace:SCLauncher.ui.controls"
             xmlns:li="clr-namespace:LoadingIndicators.Avalonia;assembly=LoadingIndicators.Avalonia"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="300"
             x:Class="SCLauncher.ui.views.serverhost.ServerConsole">
	
	<UserControl.Styles>
		
		<Style Selector="li|LoadingIndicator#StatusIndicator">
			<Style Selector="^.offline">
				<Setter Property="Foreground" Value="OrangeRed"/>
				<Setter Property="SpeedRatio" Value="0"/>
			</Style>
			<Style Selector="^.online">
				<Setter Property="Foreground" Value="DeepSkyBlue"/>
				<Setter Property="SpeedRatio" Value="0.25"/>
			</Style>
		</Style>
		
		<Style Selector="Button#StartButton">
			<Setter Property="Background">
				<LinearGradientBrush StartPoint="0%,0%" EndPoint="0%,100%">
					<GradientStop Color="#006400" Offset="0.0"/>
					<GradientStop Color="#004500" Offset="1.0"/>
				</LinearGradientBrush>
			</Setter>
		</Style>
		
		<Style Selector="Button#StopButton">
			<Setter Property="Background">
				<LinearGradientBrush StartPoint="0%,0%" EndPoint="0%,100%">
					<GradientStop Color="#8B0000" Offset="0.0"/>
					<GradientStop Color="#4E000B" Offset="1.0"/>
				</LinearGradientBrush>
			</Setter>
		</Style>
		
		<Style Selector="Button#StopButton, Button#StartButton">
			<Setter Property="Padding" Value="50 2"/>
			<Setter Property="VerticalAlignment" Value="Center"/>
			<Setter Property="HorizontalContentAlignment" Value="Center"/>
			<Setter Property="CornerRadius" Value="10 0"/>
		</Style>

	</UserControl.Styles>
	
	<DockPanel>
		
		<!-- Header - status/action row -->
		<DockPanel DockPanel.Dock="Top" HorizontalAlignment="Stretch" Margin="0 0 5 0">
			
			<!-- Aligned right -->
			<StackPanel DockPanel.Dock="Right" Orientation="Horizontal" HorizontalAlignment="Right">
				<Button Name="StartButton" Content="Start"/>
				<Button Name="StopButton" Content="Stop"/>
				<Button Margin="15 0 0 0" Background="Transparent">
					<PathIcon Data="{StaticResource more_regular}" Height="10" Width="15"/>
					<Button.Flyout>
						<MenuFlyout Placement="BottomEdgeAlignedRight" VerticalOffset="3" HorizontalOffset="4">
							<MenuItem Header="Join now" Click="OnMenuJoinClicked"/>
							<MenuItem Header="Copy join link" Click="OnMenuCopyLinkClicked"/>
							<MenuItem Header="Copy server IP" Click="OnMenuCopyIpClicked"/>
							<MenuItem Header="-"/>
							<MenuItem Header="Installer" Click="OnMenuInstallerClicked"/>        
						</MenuFlyout>
					</Button.Flyout>
				</Button>
			</StackPanel>
			
			<!-- Aligned left -->
			<StackPanel DockPanel.Dock="Left" Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
				<Viewbox Stretch="Uniform" Height="25">
					<li:LoadingIndicator Name="StatusIndicator" Mode="DoubleBounce"/>
				</Viewbox>
				<Label VerticalAlignment="Center" Name="StatusIndicatorLabel"/>
			</StackPanel>
		</DockPanel>
		
		<!-- Footer - command input row -->
		<Border DockPanel.Dock="Bottom" CornerRadius="5"
		        HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Margin="0 10 0 0">
				<controls:ConsoleCommandTextBox Name="CommandTextBox" CommandSubmitted="OnCommandSubmit"/>
		</Border>
		
		<!-- Console -->
		<Border Background="Black" BorderBrush="{StaticResource SystemAccentColor}"
		        BorderThickness="1" CornerRadius="5" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
			<controls:StatusMessageViewer Name="ConsoleViewer" Limit="1000"/>
		</Border>
		
	</DockPanel>
	
</UserControl>
